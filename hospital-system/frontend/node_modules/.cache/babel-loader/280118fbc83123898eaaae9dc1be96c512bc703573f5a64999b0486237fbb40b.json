{"ast":null,"code":"const API_BASE_URL = 'http://localhost:5000';\nconst handleResponse = async response => {\n  // Check if response is a redirect to login (authentication failed)\n  if (response.status === 302 || response.url.includes('/auth/login')) {\n    // Redirect to login page\n    window.location.href = '/';\n    throw new Error('Authentication required');\n  }\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n  }\n  return response.json();\n};\nexport const api = {\n  get: async endpoint => {\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      credentials: 'include'\n    });\n    return handleResponse(response);\n  },\n  post: async (endpoint, data) => {\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data),\n      credentials: 'include'\n    });\n    return handleResponse(response);\n  },\n  put: async (endpoint, data) => {\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data),\n      credentials: 'include'\n    });\n    return handleResponse(response);\n  }\n};","map":{"version":3,"names":["API_BASE_URL","handleResponse","response","status","url","includes","window","location","href","Error","ok","errorData","json","catch","message","api","get","endpoint","fetch","credentials","post","data","method","headers","body","JSON","stringify","put"],"sources":["/home/ndegwa/Kenyatta/hospital-system/frontend/src/services/api.js"],"sourcesContent":["const API_BASE_URL = 'http://localhost:5000';\n\nconst handleResponse = async (response) => {\n  // Check if response is a redirect to login (authentication failed)\n  if (response.status === 302 || response.url.includes('/auth/login')) {\n    // Redirect to login page\n    window.location.href = '/';\n    throw new Error('Authentication required');\n  }\n  \n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n  }\n  \n  return response.json();\n};\n\nexport const api = {\n  get: async (endpoint) => {\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      credentials: 'include'\n    });\n    return handleResponse(response);\n  },\n  \n  post: async (endpoint, data) => {\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data),\n      credentials: 'include'\n    });\n    return handleResponse(response);\n  },\n  \n  put: async (endpoint, data) => {\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data),\n      credentials: 'include'\n    });\n    return handleResponse(response);\n  },\n};"],"mappings":"AAAA,MAAMA,YAAY,GAAG,uBAAuB;AAE5C,MAAMC,cAAc,GAAG,MAAOC,QAAQ,IAAK;EACzC;EACA,IAAIA,QAAQ,CAACC,MAAM,KAAK,GAAG,IAAID,QAAQ,CAACE,GAAG,CAACC,QAAQ,CAAC,aAAa,CAAC,EAAE;IACnE;IACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;IAC1B,MAAM,IAAIC,KAAK,CAAC,yBAAyB,CAAC;EAC5C;EAEA,IAAI,CAACP,QAAQ,CAACQ,EAAE,EAAE;IAChB,MAAMC,SAAS,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACzD,MAAM,IAAIJ,KAAK,CAACE,SAAS,CAACG,OAAO,IAAI,uBAAuBZ,QAAQ,CAACC,MAAM,EAAE,CAAC;EAChF;EAEA,OAAOD,QAAQ,CAACU,IAAI,CAAC,CAAC;AACxB,CAAC;AAED,OAAO,MAAMG,GAAG,GAAG;EACjBC,GAAG,EAAE,MAAOC,QAAQ,IAAK;IACvB,MAAMf,QAAQ,GAAG,MAAMgB,KAAK,CAAC,GAAGlB,YAAY,GAAGiB,QAAQ,EAAE,EAAE;MACzDE,WAAW,EAAE;IACf,CAAC,CAAC;IACF,OAAOlB,cAAc,CAACC,QAAQ,CAAC;EACjC,CAAC;EAEDkB,IAAI,EAAE,MAAAA,CAAOH,QAAQ,EAAEI,IAAI,KAAK;IAC9B,MAAMnB,QAAQ,GAAG,MAAMgB,KAAK,CAAC,GAAGlB,YAAY,GAAGiB,QAAQ,EAAE,EAAE;MACzDK,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC;MAC1BF,WAAW,EAAE;IACf,CAAC,CAAC;IACF,OAAOlB,cAAc,CAACC,QAAQ,CAAC;EACjC,CAAC;EAEDyB,GAAG,EAAE,MAAAA,CAAOV,QAAQ,EAAEI,IAAI,KAAK;IAC7B,MAAMnB,QAAQ,GAAG,MAAMgB,KAAK,CAAC,GAAGlB,YAAY,GAAGiB,QAAQ,EAAE,EAAE;MACzDK,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC;MAC1BF,WAAW,EAAE;IACf,CAAC,CAAC;IACF,OAAOlB,cAAc,CAACC,QAAQ,CAAC;EACjC;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}